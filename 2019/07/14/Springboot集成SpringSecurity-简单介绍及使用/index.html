<!--
	作者：Sariay
	时间：2018-09-25
	描述：There may be a bug, but don't worry, QiLing(器灵) says that it can work normally!
-->


	<!DOCTYPE html>
	<html>
		

<head><meta name="generator" content="Hexo 3.8.0">
	<title>Spring security框架简介</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="apple-mobile-web-app-title" content="Amaze UI">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="Hyhua">
    <meta name="keywords" content>
    <meta name="description" content>
   	<!-- css -->
	<link rel="stylesheet" href="/css/style.css">

	<!-- favicon -->
	<link href="/img/favicon.ico" rel="Shortcut Icon" type="image/ico">
	
	<!-- font-awesome -->
	<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
	<body>	
		<!--Preloader-->
<div id="preloader">
	<div id="status">
		<img alt="PRELOADER" src="/img/logo.png">
	</div>
</div>
<!--Preloader end-->

<!-- header -->

	<header id="header-bg-2">

	
		<div id="cd-logo"><a href="/"><img src="/img/logo.png" alt="Logo"></a></div>
	
	
	<!-- motto or description -->
		
 		<p class="motto"></p>
	
	
	<!-- current page name or title -->
	
		
		
			
			<p class="page-name">当前文章&nbsp;:&nbsp;《Spring security框架简介》</p>
			
		
	
	
	<!-- others: such as change-bg, time... -->
	<p class="page-name-other">
		8/11/2019 
		<style type="text/css">
	header:after {
		content: '';
		position: relative;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		background: #222222;
		opacity: .5;
		z-index: -1;
	}
	
	.change-header-bg{
		font-style: normal;
	}
	.change-header-bg i{
		text-align: center;
		cursor: pointer;
		pointer-events: bounding-box;
	}
	@media(max-width:512px) {
		.change-header-bg {
			display: none;
			visibility: hidden;
		}
	}
	
</style>

<script type="text/javascript">
	function changeHeaderBg(){
		var random_bg = Math.floor(Math.random() * 109 + 1);
		var bg = 'url(' + random_bg + '.jpg)';
		$("#header-bg-2").css("background-image", bg);
	}
</script>

<span class="change-header-bg">
	——&nbsp;<i class="fa fa-camera-retro" onclick="changeHeaderBg()"></i>	
</span>
	</p>		
</header>

<!-- nav -->
<div id="cd-nav">
	<a href="#0" title="menu" class="cd-nav-trigger"><span></span></a>

	<nav id="cd-main-nav">
		<ul>
			
      		<li class="fa fa-/">
           		<a href="/" title="主页">主页</a>	
      		</li>
    		
      		<li class="fa fa-/archives">
           		<a href="/archives" title="归档">归档</a>	
      		</li>
    		
      		<li class="fa fa-/categories">
           		<a href="/categories" title="分类">分类</a>	
      		</li>
    		
      		<li class="fa fa-/tags">
           		<a href="/tags" title="标签">标签</a>	
      		</li>
    		
      		<li class="fa fa-/about">
           		<a href="/about" title="关于">关于</a>	
      		</li>
    		
      		<li class="fa fa-/gallery">
           		<a href="/gallery" title="相册">相册</a>	
      		</li>
    		
    		
        	
		</ul>
	</nav>
</div>

		<!--main-->
		<main> 
		<div class="page-container">
		<!-- content srart -->
<div class="am-g am-g-fixed blog-fixed blog-content">
	<div class="am-u-md-8 am-u-sm-12">

		<article class="am-article blog-article-p">

			<div class="am-article-hd">
				


				<h1 class="am-article-title blog-text-center">
					
					
	
		<a href="/2019/07/14/Springboot集成SpringSecurity-简单介绍及使用/" itemprop="url">		
			Spring security框架简介		
		</a>
	

				</h1>

				<p class="am-article-meta blog-text-center">
					<span>
						<i class="fa fa-clock-o"></i> 
						<a href="/2019/07/14/Springboot集成SpringSecurity-简单介绍及使用/" itemprop="url">
	<time datetime="2019-07-14T04:04:47.000Z" itemprop="datePublished">
  		2019-07-14
  </time>
</a>    
&nbsp;
					</span>
					
					<span>						
						
							<i class="fa fa-tags"></i>
							
								<a href="#springboot" title="springboot" rel="10">springboot</a>&nbsp;
													 											
						
					</span>
				</p>
			</div>

			<div class="am-article-bd">
				<div class="content" id="post-content">
					
						<h1 id="一、Spring-security框架简介"><a href="#一、Spring-security框架简介" class="headerlink" title="一、Spring security框架简介"></a><center>一、Spring security框架简介</center></h1><h2 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h2><p>​           一个能够为<strong>基于Spring的企业应用系统</strong>提供<strong>声明式</strong>的<strong>安全訪问控制解决方式</strong>的<strong>安全框架</strong>（简单说是对访问权限进行控制嘛），应用的安全性包括<strong>用户认证（Authentication）和用户授权（Authorization）</strong>两个部分。<strong>用户认证指的是验证某个用户是否为系统中的合法主体，也就是说用户能否访问该系统。</strong>用户认证一般要求用户提供用户名和密码。系统通过校验用户名和密码来完成认证过程<strong>。用户授权指的是验证某个用户是否有权限执行某个操作。在一个系统中，不同用户所具有的权限是不同的</strong>。比如对一个文件来说，有的用户只能进行读取，而有的用户可以进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的权限。   <strong>spring security的主要核心功能为 认证和授权，所有的架构也是基于这两个核心功能去实现的。</strong></p>
<p>备注：SpringSide 3安全框架介绍：<a href="http://www.blogjava.net/youxia/archive/2008/12/07/244883.html" target="_blank" rel="noopener">http://www.blogjava.net/youxia/archive/2008/12/07/244883.html</a></p>
<h2 id="2、框架原理"><a href="#2、框架原理" class="headerlink" title="2、框架原理"></a>2、框架原理</h2><p> 众所周知 <strong>想要对对Web资源进行保护，最好的办法莫过于Filter，要想对方法调用进行保护，最好的办法莫过于AOP</strong>。所以springSecurity在我们进行用户认证以及授予权限的时候，通过各种各样的拦截器来控制权限的访问，从而实现安全。<br>    如下为其主要过滤器  </p>
<pre><code class="properties">WebAsyncManagerIntegration Filter 
SecurityContextPersistence Filter 
HeaderWriter Filter 
Cors Filter 
Logout Filter
RequestCacheAware Filter
SecurityContextHolderAwareRequest Filter
AnonymousAuthentication Filter
SessionManagement Filter
ExceptionTranslation Filter
FilterSecurity Interceptor
UsernamePasswordAuthentication Filter
BasicAuthentication Filter
</code></pre>
<h2 id="3、框架的核心组件"><a href="#3、框架的核心组件" class="headerlink" title="3、框架的核心组件"></a>3、框架的核心组件</h2><p>  SecurityContextHolder：提供对SecurityContext的访问<br>  SecurityContext,：持有Authentication对象和其他可能需要的信息<br>  AuthenticationManager 其中可以包含多个AuthenticationProvider<br>  ProviderManager对象为AuthenticationManager接口的实现类<br>  AuthenticationProvider 主要用来进行认证操作的类 调用其中的authenticate()方法去进行认证操作<br>  Authentication：Spring Security方式的认证主体<br>  GrantedAuthority：对认证主题的应用层面的授权，含当前用户的权限信息，通常使用角色表示<br>  UserDetails：构建Authentication对象必须的信息，可以自定义，可能需要访问DB得到<br>  UserDetailsService：通过username构建UserDetails对象，通过loadUserByUsername根据userName获取UserDetail对象 （可以在这里基于自身业务进行自定义的实现  如通过数据库，xml,缓存获取等）           </p>
<h2 id="4，Spring-Security实现原理："><a href="#4，Spring-Security实现原理：" class="headerlink" title="4，Spring Security实现原理："></a>4，Spring Security实现原理：</h2><p>Spring Security对Web安全性的支持大量地依赖于Servlet过滤器。通过这些过滤器拦截进入请求，判断是否已经登录认证且具访问对应请求的权限。</p>
<p><strong>要完成访问控制</strong>，Spring Security<strong>至少需要下面四个拦截器</strong></p>
<h5 id="1-调度器"><a href="#1-调度器" class="headerlink" title="1.调度器"></a><strong>1.调度器</strong></h5><h5 id="2-认证管理器、"><a href="#2-认证管理器、" class="headerlink" title="2.认证管理器、"></a><strong>2.认证管理器、</strong></h5><h5 id="3-权限资源关联器"><a href="#3-权限资源关联器" class="headerlink" title="3.权限资源关联器"></a><strong>3.权限资源关联器</strong></h5><h5 id="4-访问决策器"><a href="#4-访问决策器" class="headerlink" title="4.访问决策器"></a><strong>4.访问决策器</strong></h5><p>进行配合完成</p>
<h5 id="5-简单Demo测试："><a href="#5-简单Demo测试：" class="headerlink" title="5,简单Demo测试："></a>5,简单Demo测试：</h5><h6 id="一、导入依赖"><a href="#一、导入依赖" class="headerlink" title="一、导入依赖"></a>一、导入依赖</h6><p>导入 <code>spring-boot-starter-security</code> 依赖，在 SpringBoot 2.0 环境下默认使用的是 5.0 版本。</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.3.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;

</code></pre>
<h6 id="二：用mybatis-generator生成三个表用户表-角色表-用户角色关联表"><a href="#二：用mybatis-generator生成三个表用户表-角色表-用户角色关联表" class="headerlink" title="二：用mybatis-generator生成三个表用户表-角色表-用户角色关联表"></a>二：用mybatis-generator生成三个表用户表-角色表-用户角色关联表</h6><p>此处直接展示Bean，具体mapper和xml省略。</p>
<pre><code class="java">@Data
public class User extends BaseModel implements Serializable {
    static final long serialVersionUID = 1L;

    private Integer id;

    private String username;

    private String password;

   }

@Data
public class Role implements Serializable {
    static final long serialVersionUID = 1L;

    private Integer id;

    private String rolename;
}

@Data
public class RoleUser implements Serializable {
    static final long serialVersionUID = 1L;

    private Integer id;

    private Integer userid;

    private Integer roleid;

}
</code></pre>
<h6 id="三：编写Service实现登录用户获取及相关验证"><a href="#三：编写Service实现登录用户获取及相关验证" class="headerlink" title="三：编写Service实现登录用户获取及相关验证"></a>三：编写Service实现登录用户获取及相关验证</h6><p>为了方便，此处就创建一个Service，实际还是按Bean分开较好</p>
<pre><code class="java">@Service(&quot;UserRoleService&quot;)
public class UserRoleService {
    @Resource
    private UserMapper userMapper;
    @Resource
    private RoleMapper roleMapper;
    @Resource
    private RoleUserMapper roleUserMapper;
    /**
    *通过ID获取用户
    */
    public User selectById(Integer id) {
        return userMapper.selectByPrimaryKey(id);
    }
    /**
    *通过用户名获取用户
    */
    public User selectByName(String name) {
        return userMapper.selectByUserName(name);
    }
    /**
    *通过ID获取角色信息（角色控制权限控制信息）
    */
    public Role selectByRoleId(Integer id){
        return roleMapper.selectByPrimaryKey(id);
    }
    /**
    *通过用户ID获取用户角色
    */
    public List&lt;RoleUser&gt; listByUserId(Integer userId) {
        return roleUserMapper.selectByUserid(userId);
    }
}

</code></pre>
<h6 id="四：实现UserDetailsService完成用户细节服务处理（这步必须实现，且自定义的Service必须交有Spring管理）"><a href="#四：实现UserDetailsService完成用户细节服务处理（这步必须实现，且自定义的Service必须交有Spring管理）" class="headerlink" title="四：实现UserDetailsService完成用户细节服务处理（这步必须实现，且自定义的Service必须交有Spring管理）"></a>四：实现UserDetailsService完成用户细节服务处理（这步必须实现，且自定义的Service必须交有Spring管理）</h6><pre><code class="java">
@Service(&quot;CustomUserDetailsService&quot;)
public class CustomUserDetailsService  implements UserDetailsService {
    @Resource
    UserRoleService userRoleService;
    /**
    参数S是用户名
    */
    @Override
    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {
        Collection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();
        // 从数据库中取出用户信息
        com.hyhua.valideta.bean.User user = userRoleService.selectByName(s);
        // 判断用户是否存在
        if(user == null) {
            throw new UsernameNotFoundException(&quot;用户名不存在&quot;);
        }

        // 添加权限
        List&lt;RoleUser&gt; userRoles = userRoleService.listByUserId(user.getId());
        for (RoleUser userRole : userRoles) {
            Role role = userRoleService.selectByRoleId(userRole.getRoleid());
            authorities.add(new SimpleGrantedAuthority(role.getRolename()));
        }

        // 返回UserDetails实现类-注意此User导的是框架的USer
        return new User(user.getUsername(), user.getPassword(), authorities);
    }
}
</code></pre>
<h6 id="五：配置Security配置启动类"><a href="#五：配置Security配置启动类" class="headerlink" title="五：配置Security配置启动类"></a>五：配置Security配置启动类</h6><pre><code class="java">![securityoper](C:\Users\Administrator\Desktop\bolg图片\securityoper.png)
@Configuration
@EnableWebSecurity
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
    @Autowired
    private CustomUserDetailsService userDetailsService;

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userDetailsService).passwordEncoder(new PasswordEncoder() {
            @Override
            public String encode(CharSequence charSequence) {
                return charSequence.toString();
            }

            @Override
            public boolean matches(CharSequence charSequence, String s) {
                return s.equals(charSequence.toString());
            }
        });
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests()
                // 如果有允许匿名的url，填在下面
//                .antMatchers().permitAll()
                .anyRequest().authenticated()
                .and()
                // 设置登陆页
                .formLogin().loginPage(&quot;/login&quot;)
                // 设置登陆成功页
                .defaultSuccessUrl(&quot;/&quot;).permitAll()
                // 自定义登陆用户名和密码参数，默认为username和password
//                .usernameParameter(&quot;username&quot;)
//                .passwordParameter(&quot;password&quot;)
                .and()
                .logout()
                .permitAll();

        // 关闭CSRF跨域
        http.csrf().disable();
    }

    @Override
    public void configure(WebSecurity web) throws Exception {
        // 设置拦截忽略文件夹，可以对静态资源放行
        web.ignoring().antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;);
    }
}


</code></pre>
<h6 id="六：访问测试："><a href="#六：访问测试：" class="headerlink" title="六：访问测试："></a>六：访问测试：</h6><p><img src="http://blog.mibook.top/securityoper.png" alt></p>
<h6 id="七：其他注意事项："><a href="#七：其他注意事项：" class="headerlink" title="七：其他注意事项："></a>七：其他注意事项：</h6><pre><code class="java">@Override
protected void configure(AuthenticationManagerBuilder auth) throws Exception {
     auth.userDetailsService(userDetailsService)
         .passwordEncoder(new BCryptPasswordEncoder());
 }
</code></pre>

					
				</div>
			</div>
		</article>

		<ul class="am-pagination">
    
    	<li class="am-pagination-prev">
   		<a class="pull-left" href="/2019/07/14/Springboot集成SpringSecurity-自定义表单登录/" title="SpringBoot集成Spring Security——自定义表单登录">
      		&laquo; 上一篇
		</a>
		</li>
	
	
		<li class="am-pagination-next">
		<a class="pull-right" href="/2019/07/14/Springboot集成SpringSecurity-异常处理捕获/" title="SpringSecurity-异常处理捕获">
			下一篇 &raquo;
		</a>
		</li>
	 
 </ul>
        

		<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80MTAzNC8xNzU1OQ==">
<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
</script>
<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
		
		<!--
	时间：2018-09-24
	描述：The TOC module refers to 'https://github.com/codefine/hexo-theme-mellow', include toc.ejs、toc.js、toc.css. All rights reserved by codefine. 
-->

	
		<aside class="post-widget">
			<nav class="post-toc-wrap" id="post-toc">
				
					<strong>文章目录</strong>
				
				
				<!--toc(post.content)-->
				<ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一、Spring-security框架简介"><span class="post-toc-text">一、Spring security框架简介</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1、简介"><span class="post-toc-text">1、简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2、框架原理"><span class="post-toc-text">2、框架原理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3、框架的核心组件"><span class="post-toc-text">3、框架的核心组件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4，Spring-Security实现原理："><span class="post-toc-text">4，Spring Security实现原理：</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-调度器"><span class="post-toc-text">1.调度器</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-认证管理器、"><span class="post-toc-text">2.认证管理器、</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-权限资源关联器"><span class="post-toc-text">3.权限资源关联器</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#4-访问决策器"><span class="post-toc-text">4.访问决策器</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#5-简单Demo测试："><span class="post-toc-text">5,简单Demo测试：</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#一、导入依赖"><span class="post-toc-text">一、导入依赖</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#二：用mybatis-generator生成三个表用户表-角色表-用户角色关联表"><span class="post-toc-text">二：用mybatis-generator生成三个表用户表-角色表-用户角色关联表</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#三：编写Service实现登录用户获取及相关验证"><span class="post-toc-text">三：编写Service实现登录用户获取及相关验证</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#四：实现UserDetailsService完成用户细节服务处理（这步必须实现，且自定义的Service必须交有Spring管理）"><span class="post-toc-text">四：实现UserDetailsService完成用户细节服务处理（这步必须实现，且自定义的Service必须交有Spring管理）</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#五：配置Security配置启动类"><span class="post-toc-text">五：配置Security配置启动类</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#六：访问测试："><span class="post-toc-text">六：访问测试：</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#七：其他注意事项："><span class="post-toc-text">七：其他注意事项：</span></a></li></ol></li></ol></li></ol></li></ol>
			</nav>
			<div class="post-toc-bar"><div>
		</div></div></aside>
	

	</div>
</div>
		</div>
		</main>
		
		<!--footer-->
		<footer>
	<div class="blog-text-center">
		<div class="theme-annie-social">
				
				
					<a href="https://hu793141126.github.io/about/" title="Github" target="_blank"><i class="fa fa-github"></i>&nbsp;</a>
					
				
					<a href="https://hu793141126.github.io/about/" title="Weibo" target="_blank"><i class="fa fa-weibo"></i>&nbsp;</a>
				
				
					<a href="https://hu793141126.github.io/about/" title="Email" target="_blank"><i class="fa fa-envelope-o"></i>&nbsp;</a>
					
				
					<a href="https://hu793141126.github.io/about/" title="QQ" target="_blank"><i class="fa fa-qq"></i>&nbsp;</a>
					
				
					<a href="https://hu793141126.github.io/about/" title="Twitter" target="_blank"><i class="fa fa-twitter"></i>&nbsp;</a>
						
				
		</div>
	</div>

	<div class="blog-text-center">
		<div class="theme-annie-copyright">
			
				&copy; 2017 - 2019, content by Hyhua. All Rights Reserved.			       	
			
		</div>
	</div>

	<div class="blog-text-center">
		<div class="theme-annie-copyright">
			<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">Xiaohua博客页总访问量<span id="busuanzi_value_site_pv"></span>次</span>	
		</div>
	</div>
</footer>
		<!-- <script src="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script> -->

<script>
	window.jQuery || document.write('<script src="/js/jquery-2.1.1.min.js"><\/script>')
</script>

<style>
	.motto {
		color: #000000;
		font-size: 20px;
		margin: 100px 25% 0;
		width: 50%;
		line-height: 1.4;
		font-family:"KaiTi", "STXingkai", "Source Sans Pro", "Segoe UI", "Lucida Grande", Helvetica, Arial, "Microsoft YaHei", FreeSans, Arimo, "Droid Sans", "wenquanyi micro hei", "Hiragino Sans GB", "Hiragino Sans GB W3", FontAwesome, sans-serif;
		text-align: center;
	}
	@media(max-width: 890px) {
		.motto {	
			margin: 100px 10% 0;
			width: 80%;
		}
	}
	@media(max-width: 890px) {
		.motto {
			margin: 100px 5% 0;
			width: 90%;
		}
	}
</style>


	<script src="/js/motto.js"></script>
	<script type="text/javascript">
		$(".motto").html(getMingYanContent());
	</script>	





	<script type="text/javascript" src="/js/love.js"></script>



	<script type="text/javascript" src="/js/toc.js"></script>


<script type="text/javascript" src="/js/main.js"></script>

<script type="text/javascript">
	//generate a random img that pre_name 'from 0 to 110'
	var random_bg = Math.floor(Math.random() * 109 + 1);

	//var bg = 'url(/img/random/' + random_bg + '.jpg)';		
	var bg = 'url(' + random_bg + '.jpg)';

	$("#header-bg-2").css("background-image", bg);
</script>
		
		<!--back to top-->
        <style type="text/css">
	#totop {
		background: white;
		border-radius: 50%;
		position: fixed;
		right: 5.4%;
		bottom: 80px;
		cursor: pointer;
	}
	
	#totop a {
		color: #474747;
		background-color: transparent;
		padding: 10px;
		text-decoration: none;
	}
	
	@media(max-width:512px) {
		#totop {
			display: none;
			visibility: hidden;
		}
	}
</style>


	<div id="totop">
  		<a href="javascript:;" class="fa fa-arrow-up"></a>
	</div>

	</body>
	</html>

